#include "Maths.h"
#include <stdio.h> // Pour le d�bug uniquement pour faire du printf


const float RATIO_DISCRET = 114.5916; // Constante de la discr�tisation sur 180 pas
float SIN_DISCRET[181];


//inline float Maths_Abs(float val) {
//	return val < 0 ? -val : val;
//}

void Maths_Initialise() {
	
	PI = 3.141593F; //Pr�cision flottante de 7 chiffres significatifs
	DEUX_PI = 6.283185F;      // Idem
	PI_SUR_DEUX = 1.570796F;  // Idem
	 
	
	//
	// Le code ci dessous est g�n�r� a partir de C#, ne pas modifier !
	//
	SIN_DISCRET[0] = 0.0F;
	SIN_DISCRET[1] = 0.008726536F;
	SIN_DISCRET[2] = 0.01745241F;
	SIN_DISCRET[3] = 0.02617695F;
	SIN_DISCRET[4] = 0.03489950F;
	SIN_DISCRET[5] = 0.04361939F;
	SIN_DISCRET[6] = 0.05233596F;
	SIN_DISCRET[7] = 0.06104854F;
	SIN_DISCRET[8] = 0.06975648F;
	SIN_DISCRET[9] = 0.07845910F;
	SIN_DISCRET[10] = 0.08715574F;
	SIN_DISCRET[11] = 0.09584576F;
	SIN_DISCRET[12] = 0.1045285F;
	SIN_DISCRET[13] = 0.1132032F;
	SIN_DISCRET[14] = 0.1218693F;
	SIN_DISCRET[15] = 0.1305262F;
	SIN_DISCRET[16] = 0.1391731F;
	SIN_DISCRET[17] = 0.1478094F;
	SIN_DISCRET[18] = 0.1564345F;
	SIN_DISCRET[19] = 0.1650476F;
	SIN_DISCRET[20] = 0.1736482F;
	SIN_DISCRET[21] = 0.1822355F;
	SIN_DISCRET[22] = 0.1908090F;
	SIN_DISCRET[23] = 0.1993679F;
	SIN_DISCRET[24] = 0.2079117F;
	SIN_DISCRET[25] = 0.2164396F;
	SIN_DISCRET[26] = 0.2249511F;
	SIN_DISCRET[27] = 0.2334454F;
	SIN_DISCRET[28] = 0.2419219F;
	SIN_DISCRET[29] = 0.2503800F;
	SIN_DISCRET[30] = 0.2588191F;
	SIN_DISCRET[31] = 0.2672384F;
	SIN_DISCRET[32] = 0.2756374F;
	SIN_DISCRET[33] = 0.2840154F;
	SIN_DISCRET[34] = 0.2923717F;
	SIN_DISCRET[35] = 0.3007058F;
	SIN_DISCRET[36] = 0.3090170F;
	SIN_DISCRET[37] = 0.3173047F;
	SIN_DISCRET[38] = 0.3255682F;
	SIN_DISCRET[39] = 0.3338069F;
	SIN_DISCRET[40] = 0.3420202F;
	SIN_DISCRET[41] = 0.3502074F;
	SIN_DISCRET[42] = 0.3583680F;
	SIN_DISCRET[43] = 0.3665012F;
	SIN_DISCRET[44] = 0.3746066F;
	SIN_DISCRET[45] = 0.3826835F;
	SIN_DISCRET[46] = 0.3907312F;
	SIN_DISCRET[47] = 0.3987491F;
	SIN_DISCRET[48] = 0.4067367F;
	SIN_DISCRET[49] = 0.4146933F;
	SIN_DISCRET[50] = 0.4226183F;
	SIN_DISCRET[51] = 0.4305111F;
	SIN_DISCRET[52] = 0.4383712F;
	SIN_DISCRET[53] = 0.4461978F;
	SIN_DISCRET[54] = 0.4539905F;
	SIN_DISCRET[55] = 0.4617486F;
	SIN_DISCRET[56] = 0.4694716F;
	SIN_DISCRET[57] = 0.4771588F;
	SIN_DISCRET[58] = 0.4848096F;
	SIN_DISCRET[59] = 0.4924236F;
	SIN_DISCRET[60] = 0.5000000F;
	SIN_DISCRET[61] = 0.5075384F;
	SIN_DISCRET[62] = 0.5150381F;
	SIN_DISCRET[63] = 0.5224986F;
	SIN_DISCRET[64] = 0.5299193F;
	SIN_DISCRET[65] = 0.5372996F;
	SIN_DISCRET[66] = 0.5446391F;
	SIN_DISCRET[67] = 0.5519370F;
	SIN_DISCRET[68] = 0.5591930F;
	SIN_DISCRET[69] = 0.5664063F;
	SIN_DISCRET[70] = 0.5735765F;
	SIN_DISCRET[71] = 0.5807030F;
	SIN_DISCRET[72] = 0.5877853F;
	SIN_DISCRET[73] = 0.5948228F;
	SIN_DISCRET[74] = 0.6018150F;
	SIN_DISCRET[75] = 0.6087614F;
	SIN_DISCRET[76] = 0.6156615F;
	SIN_DISCRET[77] = 0.6225147F;
	SIN_DISCRET[78] = 0.6293204F;
	SIN_DISCRET[79] = 0.6360782F;
	SIN_DISCRET[80] = 0.6427876F;
	SIN_DISCRET[81] = 0.6494481F;
	SIN_DISCRET[82] = 0.6560591F;
	SIN_DISCRET[83] = 0.6626201F;
	SIN_DISCRET[84] = 0.6691306F;
	SIN_DISCRET[85] = 0.6755902F;
	SIN_DISCRET[86] = 0.6819984F;
	SIN_DISCRET[87] = 0.6883546F;
	SIN_DISCRET[88] = 0.6946584F;
	SIN_DISCRET[89] = 0.7009093F;
	SIN_DISCRET[90] = 0.7071068F;
	SIN_DISCRET[91] = 0.7132505F;
	SIN_DISCRET[92] = 0.7193398F;
	SIN_DISCRET[93] = 0.7253744F;
	SIN_DISCRET[94] = 0.7313538F;
	SIN_DISCRET[95] = 0.7372774F;
	SIN_DISCRET[96] = 0.7431449F;
	SIN_DISCRET[97] = 0.7489557F;
	SIN_DISCRET[98] = 0.7547096F;
	SIN_DISCRET[99] = 0.7604060F;
	SIN_DISCRET[100] = 0.7660445F;
	SIN_DISCRET[101] = 0.7716246F;
	SIN_DISCRET[102] = 0.7771460F;
	SIN_DISCRET[103] = 0.7826082F;
	SIN_DISCRET[104] = 0.7880108F;
	SIN_DISCRET[105] = 0.7933534F;
	SIN_DISCRET[106] = 0.7986355F;
	SIN_DISCRET[107] = 0.8038569F;
	SIN_DISCRET[108] = 0.8090170F;
	SIN_DISCRET[109] = 0.8141155F;
	SIN_DISCRET[110] = 0.8191521F;
	SIN_DISCRET[111] = 0.8241262F;
	SIN_DISCRET[112] = 0.8290376F;
	SIN_DISCRET[113] = 0.8338858F;
	SIN_DISCRET[114] = 0.8386706F;
	SIN_DISCRET[115] = 0.8433915F;
	SIN_DISCRET[116] = 0.8480482F;
	SIN_DISCRET[117] = 0.8526402F;
	SIN_DISCRET[118] = 0.8571673F;
	SIN_DISCRET[119] = 0.8616292F;
	SIN_DISCRET[120] = 0.8660254F;
	SIN_DISCRET[121] = 0.8703557F;
	SIN_DISCRET[122] = 0.8746197F;
	SIN_DISCRET[123] = 0.8788171F;
	SIN_DISCRET[124] = 0.8829476F;
	SIN_DISCRET[125] = 0.8870109F;
	SIN_DISCRET[126] = 0.8910065F;
	SIN_DISCRET[127] = 0.8949344F;
	SIN_DISCRET[128] = 0.8987941F;
	SIN_DISCRET[129] = 0.9025853F;
	SIN_DISCRET[130] = 0.9063078F;
	SIN_DISCRET[131] = 0.9099613F;
	SIN_DISCRET[132] = 0.9135455F;
	SIN_DISCRET[133] = 0.9170601F;
	SIN_DISCRET[134] = 0.9205049F;
	SIN_DISCRET[135] = 0.9238796F;
	SIN_DISCRET[136] = 0.9271839F;
	SIN_DISCRET[137] = 0.9304176F;
	SIN_DISCRET[138] = 0.9335805F;
	SIN_DISCRET[139] = 0.9366722F;
	SIN_DISCRET[140] = 0.9396926F;
	SIN_DISCRET[141] = 0.9426415F;
	SIN_DISCRET[142] = 0.9455186F;
	SIN_DISCRET[143] = 0.9483237F;
	SIN_DISCRET[144] = 0.9510565F;
	SIN_DISCRET[145] = 0.9537170F;
	SIN_DISCRET[146] = 0.9563048F;
	SIN_DISCRET[147] = 0.9588197F;
	SIN_DISCRET[148] = 0.9612617F;
	SIN_DISCRET[149] = 0.9636305F;
	SIN_DISCRET[150] = 0.9659259F;
	SIN_DISCRET[151] = 0.9681476F;
	SIN_DISCRET[152] = 0.9702957F;
	SIN_DISCRET[153] = 0.9723699F;
	SIN_DISCRET[154] = 0.9743701F;
	SIN_DISCRET[155] = 0.9762960F;
	SIN_DISCRET[156] = 0.9781476F;
	SIN_DISCRET[157] = 0.9799247F;
	SIN_DISCRET[158] = 0.9816272F;
	SIN_DISCRET[159] = 0.9832549F;
	SIN_DISCRET[160] = 0.9848078F;
	SIN_DISCRET[161] = 0.9862856F;
	SIN_DISCRET[162] = 0.9876884F;
	SIN_DISCRET[163] = 0.9890159F;
	SIN_DISCRET[164] = 0.9902681F;
	SIN_DISCRET[165] = 0.9914449F;
	SIN_DISCRET[166] = 0.9925461F;
	SIN_DISCRET[167] = 0.9935719F;
	SIN_DISCRET[168] = 0.9945219F;
	SIN_DISCRET[169] = 0.9953962F;
	SIN_DISCRET[170] = 0.9961947F;
	SIN_DISCRET[171] = 0.9969174F;
	SIN_DISCRET[172] = 0.9975641F;
	SIN_DISCRET[173] = 0.9981348F;
	SIN_DISCRET[174] = 0.9986295F;
	SIN_DISCRET[175] = 0.9990482F;
	SIN_DISCRET[176] = 0.9993908F;
	SIN_DISCRET[177] = 0.9996573F;
	SIN_DISCRET[178] = 0.9998477F;
	SIN_DISCRET[179] = 0.9999619F;
	SIN_DISCRET[180] = 1.0000000F;

}

int Modulo(int nb, int mod) {
	nb = nb % mod;
	if (nb < 0)
		nb += mod;
	return nb;
}

float Cos(float angleRad) {
	return Sin(PI_SUR_DEUX - angleRad);
}

//
// L'�cart maximum est de 0.43% ce qui correspond � 0.25� !
// Les angles en radians doivent etre entre -Pi et Pi lors de l'appel
float Sin(float angleRad) {
	if (angleRad < -PI) {
		printf("Angle plus petit que -Pi");
		angleRad += DEUX_PI;
		if (angleRad < -PI) {
			printf("ERREUR: angle hors de champ, sinus renvoie 0");
			angleRad = 0.0F;
		}
	}
	else if(angleRad > PI)
	{
		printf("Angle plus grand que Pi");
		angleRad -= DEUX_PI;
		if(angleRad > PI) {
			printf("ERREUR: angle hors de champ, sinus renvoie 0");
			angleRad = 0.0F;
		}
	}

	int signe = 1;
	if (angleRad < 0)
	{
		signe = -1;
		angleRad = -angleRad;
	}
	if (angleRad > PI_SUR_DEUX)
	{
		angleRad = PI - angleRad;
	}
	int index = (int)(RATIO_DISCRET * angleRad + 0.5F);

	if (signe == -1)
	{
		return -SIN_DISCRET[index];
	}
	else
	{
		return SIN_DISCRET[index];
	}
}

